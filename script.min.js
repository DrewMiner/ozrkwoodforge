document.addEventListener("DOMContentLoaded",function(){function e(){t[n].classList.remove("active"),t[n].style.opacity="0",setTimeout(()=>{t[n].style.display="none",n=(n+1)%t.length,t[n].style.display="block",setTimeout(()=>{t[n].classList.add("active"),t[n].style.opacity="1"},50)},1e3)}let t=document.querySelectorAll(".slide"),n=0;t.forEach((e,t)=>{0===t?(e.classList.add("active"),e.style.display="block",e.style.opacity="1"):e.style.display="none"}),setInterval(e,4e3),setInterval(e,4e3)}),fetch("/blog.json").then(e=>e.json()).then(e=>{let t=document.getElementById("blog-section");t.innerHTML="",e.forEach(e=>{let n=document.createElement("div");n.classList.add("blog-post");let o=e.image?`<img src="${e.image}" alt="${e.title}">`:"",l=e.excerpt?e.excerpt:e.content.substring(0,100)+"...";n.innerHTML=`\n                ${o}\n                <h3>${e.title}</h3>\n                <p><small>${e.date}</small></p>\n                <p>${l}</p>\n                <a href="blog-post.html?post=${e.slug}" class="read-more">Read More</a>\n            `,t.appendChild(n)})}).catch(e=>console.log("Error loading blog posts:",e)),fetch("/blog.json").then(e=>e.json()).then(e=>{let t=document.getElementById("latest-blog-post");if(t.innerHTML="",!e||0===e.length)return void(t.innerHTML="<p>No blog posts available.</p>");let n=e[0],o=n.image?`<img src="${n.image}" alt="${n.title}">`:"",l=n.excerpt?n.excerpt:n.content.substring(0,100)+"...";t.innerHTML=`\n            ${o}\n            <h3>${n.title}</h3>\n            <p><small>${n.date}</small></p>\n            <p>${l}</p>\n            <a href="blog-post.html?post=${n.slug}" class="read-more">Read More</a>\n        `}).catch(e=>console.log("Error loading latest blog post:",e));let mainBackButton=document.getElementById("back-button");mainBackButton&&(mainBackButton.style.opacity="1");let headerBackButton=document.getElementById("header-back-button");headerBackButton&&(headerBackButton.style.opacity="1"),document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("email-popup"),t=document.querySelector(".close-popup"),n=document.getElementById("email-form");e&&(setTimeout(function(){console.log("Triggering email popup..."),e.style.visibility="visible",e.style.opacity="1"},1e4),t&&t.addEventListener("click",function(){console.log("Closing popup..."),e.style.visibility="hidden",e.style.opacity="0"}),e.addEventListener("click",function(t){t.target===e&&(console.log("Closing popup from outside click..."),e.style.visibility="hidden",e.style.opacity="0")})),n&&n.addEventListener("submit",async function(t){t.preventDefault();const n=document.getElementById("email-input").value;try{const t=await fetch("/.netlify/functions/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),o=await t.json();t.ok?(console.log("User subscribed:",o),alert("Thank you for subscribing!"),e.style.visibility="hidden"):(console.error("Error subscribing:",o.error),alert("There was an issue subscribing. Please try again."))}catch(e){console.error("Error subscribing:",e),alert("There was an issue subscribing. Please try again.")}})}),fetch("/info.txt").then(e=>{if(!e.ok)throw new Error("Failed to fetch info.txt");return e.text()}).then(e=>{const t=document.getElementById("static-text");t?t.innerText=e:console.error("❌ Error: #static-text not found in the document.")}).catch(e=>console.log("Error loading text file:",e));